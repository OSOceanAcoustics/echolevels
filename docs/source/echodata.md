# Implementation for echosounder data

## Current implementations

We are aware of only two efforts that have adopted data processing levels for echosounder data products: ADEON (Atlantic Deepwater Ecosystem Observatory Network {cite}`heaney_adeon_2020`) and IMOS (the Australian Integrated Marine Observing System {cite}`haris_imos_2018,haris_sounding_2021`). ADEON developed a set of six processing levels (L0 - L5) for passive and active acoustics, where L0 corresponds to raw, unprocessed data files generated by the instruments; L1 contains calibrated time series data, including calibrated volume backscattering strength (_Sv_); L2 is the first level of data processed from the calibrated data, such as depth-integrated _Sv_ with noise removal applied; and L3 - L5 contain higher-order processing, including signal classifications, interpolated products and synthesis or modeled products. Heaney et al. {cite}`heaney_adeon_2020` use a table that aligns different systems to provide a visual comparison of their processing levels with those from NASA EOS and from the French IFREMER program {cite}`ifremer_processing_2019`. In practice, the ADEON focus for active acoustics was largely on L0 - L2. Straightforward data formats were used for the resulting products (e.g., csv).

The IMOS SOOP-BA NetCDF convention (Ships of Opportunity Bio-Acoustic {cite}`haris_imos_2018,haris_sounding_2021`) is focused on derived data categorized as L2 using the broader IMOS “file_version” processing level categorization for marine data that also includes L0 (Raw data) and L1 (Quality controlled data). These data are stored in a NetCDF format that is metadata rich and follows broader ocean and earth science data and metadata standards. IMOS SOOP-BA products (referred to simply as IMOS hereon) include several variables, including processed _Sv_ (motion correction and filtering, noise removal), uncorrected and unfiltered _Sv_, metrics derived from _Sv_, and ancillary oceanographic data. Unmodified raw data files are archived and made available only upon request (Haris, K., pers. comm.).


## Proposed Processing Levels and Sub-levels

The review of existing data processing level categorizations in the environmental monitoring community and the limited implementations for echosounder data highlight broad consistencies in the progression of processing levels and the criteria used to distinguish between levels. However, considerable differences have also been noted, reflecting specific features of the observing system or goals of the group implementing the data processing level scheme. For example, in contrast to the more common NASA EOS definition, Level 1 sometimes accommodates data products with calibration already applied, as in CEOS and ADEON. Geolocation is sometimes assigned at every data point at Level 1 rather than Level 2. Quality control steps, such as those involving distortions or noise, occur in Level 1 and Level 2. Sub-level designations, when used, have poorly standardized meanings.

Our proposal for echosounder data processing levels is strongly guided by the most widely used scheme, NASA EOS {cite}`weaver_processing_2014,nasa_data_2021`. It is also informed by the two existing implementations for echosounder data and by deviations from the NASA EOS scheme in current usage. We follow the NASA EOS number and sequence of levels from L0 to L4. We also adopt two sub-level designations for L1, L2 and L3, where the “B” sub-level reflects the “A” sub-level data after additional quality control or data filtering processing steps. As with all the schemes discussed here, except for L0, only data products with geolocation information are assigned a data processing level code.


### Level 0 (L0)

**Description:** Raw data in vendor sensor format. The data files are typically binary. Associated metadata may be found in external files.

**Rationale:** The use of L0 data processing level for raw data files in their original form is the most widespread practice in both satellite remote sensing {cite}`weaver_processing_2014,mittaz_applying_2019,nasa_data_2021` and echosounder data programs {cite}`haris_imos_2018,heaney_adeon_2020`.


### Level 1 (L1)

**Description:** Raw data packaged with ancillary information and converted and standardized to an open convention and standard data formats. Use of the ICES (International Council for the Exploration of the Sea) SONAR-netcDF4 version 1 convention {cite}`macaulay_pena_2018` is strongly recommended. While individual pings are not georeferenced, latitude and longitude coordinates are included and can be interpolated to each ping based on timestamps.

L1 data is further categorized into two sub-levels:

- **L1A:** Raw L0 data converted to a standardized, open format with geographic coordinates (latitude & longitude) included. Includes other ancillary information extracted from sensor-generated L0 data or other external sources. May include environmental information such as temperature, salinity and pressure. 
- **L1B:** L1A data with quality-control steps applied, such as time-coordinate corrections that enforce strictly increasing, non-duplicate timestamps.

L1 data may be distributed in the following two forms:

- As sets of individual converted files as originally segmented into arbitrary time ranges during sensor file creation, or
- Compiled into larger granules corresponding to logical deployment intervals while the sensor is active continuously. For a mooring, this may be a daily granule if the sensor is turned off on a daily cycle, while for a cruise it may represent well defined transects.

**Rationale:** Previous initiatives that have adopted data processing levels for their echosounder data holdings have focused their efforts on processed products that are most widely used, starting with _Sv_ and similar variables (see ADEON and IMOS discussions, above). While ADEON and IMOS use different processing levels to designate this starting point (L1 and L2, respectively), both lack a more user-accessible intermediate level between the original raw data files generated by the instruments (L0) and the processed products. The need for improved accessibility to raw data motivated the development of the SONAR-netCDF4 convention (particularly version 1) and is also borne out by the development of data repositories such as the NOAA Water Column Sonar Data Archive {cite}`wall_2016`. We adopt L1 as the data processing level that reflects raw data together with metadata ancillary data converted to an accessible, convention format, SONAR-netCDF4. This approach reflects the CEOS {cite}`ceos_interoperability_2008` definition for L1 data ("Unpacked, reformatted level 0 data, with all supplemental information to be used in subsequent processing appended"). It is also consistent with the NASA EOS L1A definition and NASA EOS’ use of standardized, metadata-rich data formats for data products.


### Level 2 (L2)

**Description:** Calibrated acoustic quantities at raw data resolution and with spatial coordinates (latitude, longitude and depth) interpolated to all pings. May include noise removal or other filtering.

- **L2A:** Volume backscattering strength (_Sv_) or target strength (_TS_) with interpolated latitude, longitude and depth coordinates. May incorporate additional information, such as split beam angle. Masks derived from these products, such as seafloor bottom mask, will also be designated as L2A products.
- **L2B:** _Sv_ or _TS_ L2A data with noise removal or other data filtering applied, such as seafloor bottom removal.

**Rationale:** The focus of L2 products in conventional data processing level schemes such as NASA EOS and CEOS is on “retrieval” of geophysical or biophysical variables from radiometric variables, at the same resolution as the input L1 data {cite}`ceos_interoperability_2008,mittaz_applying_2019,nasa_data_2021`. Radiometric calibration parameters present in L1 products are applied. Using the NASA MODIS sensor as an example, L2 ocean products include sea surface temperature and chlorophyll-a pigment concentration {cite}`parkinson_eos_2000`. For echosounder data, in contrast, calibrated and filtered acoustic quantities serve as the underlying variables that are examined directly or used for regridded products and aggregated metrics. We follow the approach used by ADEON and IMOS, where the next processing level after raw data (in our case, after the raw data was converted to an L1 product) is calibrated _Sv_ (or _TS_). This L2A product corresponds to ADEON L1 and IMOS L2 products. Additional processing involving noise characterization and removal and seafloor removal without a change in resolution are categorized as L2B, corresponding to ADEON L2 processing steps and IMOS L2 products.


### Level 3 (L3)

**Description:** Calibrated acoustic quantities regridded or aggregated to a common grid across channels. May include noise removal or other filtering. L3 products may include:

- _Sv_ resampled to a common, high-resolution grid across channels.
- Mean Volume Backscattering Strength (MVBS).
- Masks applied to _Sv_ based on different scattering source classification criteria and methods, such as frequency difference across two channels or seafloor bottom detection.

L3 data is further categorized into two sub-levels:

- **L3A:** The above variables computed on L2A data.
- **L3B:** The above variables computed on L2B (filtered) data.

**Rationale:** L3 products are commonly defined as data spatially and/or temporally re-sampled (regridded) on a regular space-time grid {cite}`ceos_interoperability_2008,mittaz_applying_2019,nasa_data_2021`. They are often referred to as gridded data. ADEON incorporates this regular gridding in the L2 product. IMOS also includes gridded variables in its L2 product; however, as discussed earlier, IMOS L2 is a broad designation encompassing products that have undergone a wide range of processing steps. Following the conventional L3 definition, we designate L3 processing levels to correspond to the outcome of resampling or binning L2 data to a common grid, often at a resolution coarser than the original data.


### Level 4 (L4)

**Description:** Acoustically derived biological, environmental, and other features, involving further processing of L3 data that may include data reduction or incorporation of external sources of data.

- Nautical Area Backscattering Coefficients (NASC), potentially partitioned into inferred sources of scattering
- Summary statistics of echogram features (center of mass, dispersion, etc).
- Taxon or species-level data labels (classification). May originate from a variety of methods, including frequency difference thresholds.
- Estimated biomass, combined or partitioned into different taxonomic sources.

**Rationale:** L4 data are typically defined as highly processed products resulting from models or analysis of lower-level data. For satellite products, they are often created to be without gaps (complete, continuous fields) and may involve data from different sensors (Mittaz et al., 2019). For example, for the MODIS sensor, ocean primary production is a L4 product (Parkinson & Greenstone, 2000). In ADEON, processing levels beyond L2 are specified but not clearly described; the L2 processing level contains gridded products, including NASC {cite}`heaney_adeon_2020`. IMOS products (all designated as L2) include derived variables (“metrics”) that are the result of integrating Sv along a depth interval such as 20 - 200 m ("epipelagic"). We include in the L4 processing level a collection of products (e.g., NASC, biomass) and derived metrics that depend on L3 products, particularly ones that are partitioned by taxonomic groupings derived either from external information or directly from echosounder analysis.
